# Example environment configuration for fast, low-latency runtime
# Copy to .env and adjust secrets/paths as needed.

# -----------------------------
# Core dataset / embedding paths
# -----------------------------
GEOPARQUET_PATH=/home/appuser/postgres-init/govgis_nov2023_slim_spatial_embs.geoparquet
EMBEDDING_MODEL_CACHE_FOLDER=/home/appuser/models

# -----------------------------
# Postgres bootstrap (superuser)
# -----------------------------
POSTGRES_HOST=postgres
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_SCHEMA=public
POSTGRES_TABLE=layers

# -----------------------------
# Read-only application role (auto-created/updated on startup)
# -----------------------------
READ_ONLY_POSTGRES_USER=appuser
READ_ONLY_POSTGRES_USER_PASSWORD=govgis

# -----------------------------
# Connection pooling & performance
# -----------------------------
# Eager mode: pre-create and validate ALL connections up front for lowest first-request latency.
PG_POOL_EAGER=true
# Max pool size (adjust to expected peak concurrency; keep modest for local/dev).
PG_POOL_MAX_SIZE=10
# Min size (ignored when eager=true; kept for clarity / if you later disable eagerness).
PG_POOL_MIN_SIZE=1
# Optional partial warm (ignored when eager=true). Leave commented for full eagerness.
# PG_POOL_WARM_TARGET=5
# Seconds to wait for a connection before raising an error.
PG_POOL_TIMEOUT=30
# Warm the embedding model at startup (keeps first query fast at cost of ~1s extra startup time depending on hardware).
EMBEDDING_WARMUP=true

# -----------------------------
# Logging
# -----------------------------
# Set to DEBUG for verbose query parameter logging, INFO for normal operation.
LOG_LEVEL=INFO

# -----------------------------
# Ancillary services
# -----------------------------
PGADMIN_DEFAULT_EMAIL=admin@admin.com
PGADMIN_DEFAULT_PASSWORD=admin
PGADMIN_PORT=80
BACKEND_PORT=8080

# -----------------------------
# Data loading tuneables
# -----------------------------
INIT_LOADER_BATCH_SIZE=500

# -----------------------------
# Index / naming
# -----------------------------
SPATIAL_INDEX_NAME=layer_extent_index
